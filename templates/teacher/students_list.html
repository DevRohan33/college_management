{% extends 'teacher_base.html' %}
{% block title %}Students - Teacher{% endblock %}
{% block page_title %}Students{% endblock %}
{% block content %}
<div class="card" style="border-radius:16px;border:1px solid var(--border-color);">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div><i class="fas fa-users me-2"></i>Students</div>
    <form method="get" class="d-flex" role="filter">
      <select name="semester" class="form-select me-2" style="min-width:200px;">
        <option value="all" {% if selected_semester == 'all' %}selected{% endif %}>All Semesters</option>
        {% for s in semesters %}
          <option value="{{ s.id }}" {% if selected_semester|add:'' == s.id|add:'' %}selected{% endif %}>Semester {{ s.semester }}</option>
        {% endfor %}
      </select>
      <button class="btn btn-primary" type="submit"><i class="fas fa-filter me-1"></i>Filter</button>
    </form>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table mb-0">
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Registration</th>
            <th>Semester</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for u in students %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ u.get_full_name|default:u.username }}</td>
            <td>{{ u.registration_number|default:'-' }}</td>
            <td>{{ u.semester.semester|default:'-' }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-primary" href="{% url 'teacher_student_detail' u.id %}">
                <i class="fas fa-eye me-1"></i>View
              </a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="text-center text-muted py-4">No students found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
